# Bookclub Production Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# =============================================================================
# DISCOURSE CORE CONFIGURATION
# =============================================================================

# Hostname for your Discourse instance (REQUIRED)
# This should be the domain name where your site will be accessible
# Example: discourse.example.com
DISCOURSE_HOSTNAME=your-domain.com

# Developer email addresses (REQUIRED)
# Comma-separated list of admin email addresses
# These addresses will receive important system notifications
DISCOURSE_DEVELOPER_EMAILS=admin@example.com,developer@example.com

# Discourse version/tag to use (optional, defaults to latest)
# You can pin to a specific version for stability
# Example: v3.1.0 or stable
DISCOURSE_VERSION=latest

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL database credentials (REQUIRED)
# Use a strong, randomly generated password
POSTGRES_USER=discourse
POSTGRES_DB=discourse
POSTGRES_PASSWORD=CHANGE_ME_TO_A_STRONG_PASSWORD

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Rails secret key base (REQUIRED)
# Generate with: openssl rand -hex 64
SECRET_KEY_BASE=CHANGE_ME_TO_A_RANDOM_64_CHARACTER_HEX_STRING

# =============================================================================
# EMAIL (SMTP) CONFIGURATION
# =============================================================================

# SMTP server configuration (REQUIRED for production)
# Discourse needs email to function (user registration, notifications, etc.)

# SMTP server address
# Examples: smtp.sendgrid.net, smtp.mailgun.org, smtp.gmail.com
SMTP_ADDRESS=smtp.example.com

# SMTP server port (usually 587 for TLS or 465 for SSL)
SMTP_PORT=587

# SMTP authentication username
SMTP_USER_NAME=your-smtp-username

# SMTP authentication password
SMTP_PASSWORD=your-smtp-password

# Enable STARTTLS (usually true for port 587)
SMTP_ENABLE_START_TLS=true

# SMTP authentication method (usually 'login')
SMTP_AUTHENTICATION=login

# SMTP domain (optional, some providers require it)
SMTP_DOMAIN=

# =============================================================================
# CDN AND ASSET STORAGE (OPTIONAL)
# =============================================================================

# CDN URL for serving static assets (optional)
# Leave empty to serve assets directly from your server
CDN_URL=

# =============================================================================
# S3 STORAGE CONFIGURATION (OPTIONAL)
# =============================================================================

# Enable S3 for uploads and backups (optional, set to true to enable)
S3_ENABLED=false

# S3 bucket name
S3_BUCKET=

# S3 region
S3_REGION=us-east-1

# S3 access credentials
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=

# S3 bucket for backups (optional, separate from uploads)
S3_BACKUP_BUCKET=

# =============================================================================
# BOOKCLUB PLUGIN CONFIGURATION
# =============================================================================

# Path to the Bookclub plugin on the host system (REQUIRED)
# This should be the absolute path to the plugin directory
# Example: /home/user/bookclub or /opt/discourse/plugins/bookclub
BOOKCLUB_PLUGIN_PATH=/path/to/bookclub

# Enable Stripe integration for payments (optional)
# Requires discourse-subscriptions plugin to be installed
BOOKCLUB_STRIPE_INTEGRATION=false

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Number of Unicorn worker processes (adjust based on server resources)
# General guideline: number of CPU cores
# More workers = better concurrency but more memory usage
UNICORN_WORKERS=4

# Number of Sidekiq worker processes (usually 1 is sufficient)
UNICORN_SIDEKIQS=1

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# S3 bucket for automated backups (optional)
# If set, backups will be uploaded to this S3 bucket
# Requires S3_ENABLED=true and S3 credentials configured above
S3_BACKUP_BUCKET=

# =============================================================================
# MONITORING AND ALERTS (OPTIONAL)
# =============================================================================

# Slack webhook URL for health check alerts (optional)
# Get this from Slack: Workspace Settings > Apps > Incoming Webhooks
SLACK_WEBHOOK_URL=

# Email address for health check alerts (optional)
ALERT_EMAIL=

# =============================================================================
# ADDITIONAL DISCOURSE SETTINGS (OPTIONAL)
# =============================================================================

# Redis configuration (advanced, usually not needed)
# The docker-compose file uses a Redis container by default
# REDIS_HOST=redis
# REDIS_PORT=6379

# Database connection pool size (advanced)
# DB_POOL=25

# Precompile assets at build time (usually true)
# PRECOMPILE_ASSETS=true

# =============================================================================
# NOTES
# =============================================================================

# Required variables:
# - DISCOURSE_HOSTNAME
# - DISCOURSE_DEVELOPER_EMAILS
# - POSTGRES_PASSWORD
# - SECRET_KEY_BASE
# - SMTP_ADDRESS
# - SMTP_USER_NAME
# - SMTP_PASSWORD
# - BOOKCLUB_PLUGIN_PATH

# How to generate secure values:
#
# For SECRET_KEY_BASE:
#   openssl rand -hex 64
#
# For POSTGRES_PASSWORD:
#   openssl rand -base64 32
#
# For SMTP_PASSWORD:
#   Use the password from your SMTP provider (SendGrid, Mailgun, etc.)

# Testing SMTP configuration:
#   Use Discourse's built-in SMTP test after deployment:
#   docker exec -it bookclub_discourse bash -c "cd /var/www/discourse && su discourse -c 'bundle exec rake emails:test[your@email.com]'"
